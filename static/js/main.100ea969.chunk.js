(this["webpackJsonpescape-room"]=this["webpackJsonpescape-room"]||[]).push([[0],{185:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),c=a(11),r=a.n(c),s=a(20),i=a(231),l=a(234),d={monday:"H\xe9tf\u0151",tuesday:"Kedd",wednesday:"Szerda",thursday:"Cs\xfctr\xf6t\xf6k",friday:"P\xe9ntek",saturday:"Szombat",sunday:"Vas\xe1rnap",week:"H\xe9t",mainPage:"F\u0151oldal",rooms:"Szob\xe1k",booking:"Foglal\xe1s",contact:"Kapcsolat",fogsagban:"Fogs\xe1gban","szoba-2":"Szoba 2","szoba-3":"Szoba 3",name:"Teljes n\xe9v",email:"Email c\xedm",phone:"Telefonsz\xe1m",message:"Megjegyz\xe9s",groupNumber:"L\xe9tsz\xe1m",nameIsRequired:"N\xe9v kit\xf6lt\xe9se k\xf6telez\u0151",invalidEmail:"Hib\xe1s e-mail",invalidPhone:"Hib\xe1s telefonsz\xe1m",numberOfGroupIsRequired:"L\xe9tsz\xe1m megad\xe1sa k\xf6telez\u0151"},b=a(2),u=Object(i.a)({navWrapper:{background:"black",color:"white",height:60,padding:0,margin:0},linkItem:{cursor:"pointer",color:"white",textDecoration:"none"}}),m=function(){var e=u();window.location.host;return Object(b.jsxs)(l.a,{className:e.navWrapper,container:!0,justifyContent:"space-around",alignItems:"center",children:[Object(b.jsx)(l.a,{item:!0,children:Object(b.jsx)(s.b,{className:e.linkItem,to:"/escape-room/",children:d.mainPage})}),Object(b.jsx)(l.a,{item:!0,children:Object(b.jsx)(s.b,{className:e.linkItem,to:"/escape-room/szobak",children:d.rooms})}),Object(b.jsxs)(l.a,{item:!0,children:[" ",Object(b.jsxs)(s.b,{className:e.linkItem,to:"/escape-room/foglalas",children:[" ",d.booking," "]})," "]}),Object(b.jsxs)(l.a,{item:!0,children:[" ",Object(b.jsxs)(s.b,{className:e.linkItem,to:"/escape-room/kapcsolat",children:[" ",d.contact," "]})," "]})]})},j=a(7),p=Object(i.a)((function(e){return{}})),O=function(){p();return Object(b.jsx)(o.a.Fragment,{})},h=function(){return Object(b.jsx)("h1",{children:"NotFound"})},f=function(){window.location.host;return Object(b.jsxs)(l.a,{container:!0,direction:"column",children:[Object(b.jsx)(l.a,{children:Object(b.jsx)(s.b,{to:"/escape-room/szobak/fogsagban",children:"SZOBA 1"})}),Object(b.jsx)(l.a,{children:Object(b.jsx)(s.b,{to:"/escape-room/szobak/szoba-2",children:"SZOBA 2"})}),Object(b.jsx)(l.a,{children:Object(b.jsx)(s.b,{to:"/escape-room/szobak/szoba-3",children:"SZOBA 3"})})]})},g=function(){return Object(b.jsx)("header",{id:"header"})},x=a(12),v=a(14),k=a(101),w=a.n(k).a.create({baseURL:"https://booking-database-aa483-default-rtdb.europe-west1.firebasedatabase.app/"}),y=a(243),N=a(246),I=a(240),C=a(242),S=a(244),z=a(241),B=a(245),M=a(247),P=a(239),T=a(191),L=a(21),E=a(236),F=a(190),W=a(238),_=a(196),D=a(249),R=a(189),q=a(193),A=Object,G=a(102),H=a.n(G),U=a(145),Z=U.LocalDate,K="fogsagban",Y="szoba-2",J="szoba-3",V="name",$="email",Q="phone",X="group_number";function ee(e){return Boolean(function(e){return"undefined"!==typeof e}(e)&&null!==e)}var te=Object(i.a)((function(e){return{form:{display:"flex",flexDirection:"column",width:500},input:{margin:5},formControl:{margin:e.spacing(1),minWidth:120},selectLabel:{paddingLeft:10},message:{"& .MuiInputBase-formControl":{height:150,display:"flex",alignItems:"flex-start"}},button:{"& > *":{margin:e.spacing(1)}}}})),ae=function(e){var t=e.handleClose,a=e.roomCapacity,o=te(),c=Object(n.useContext)(me),r=Object(n.useState)(""),s=Object(x.a)(r,2),i=s[0],l=s[1],u=Object(n.useState)({name:"",email:"",phone:"",group_number:""}),m=Object(x.a)(u,2),j=m[0],p=m[1],O=Object(n.useState)(null),h=Object(x.a)(O,2),f=h[0],g=h[1],k=Object(n.useState)(null),y=Object(x.a)(k,2),N=y[0],I=y[1],C=Object(n.useState)(null),S=Object(x.a)(C,2),z=S[0],B=S[1],M=Object(n.useState)(null),P=Object(x.a)(M,2),T=P[0],G=P[1],H=function(e,t,a){var n=e.target.value;if(a(n),p(t===V&&""===n?Object(v.a)(Object(v.a)({},j),{},Object(L.a)({},t,d.nameIsRequired)):Object(v.a)(Object(v.a)({},j),{},Object(L.a)({},t,""))),t===$){n.match(/^\w+([-]?\w+)*@\w+([-]?\w+)*(\.\w{2,3})+$/)?p(Object(v.a)(Object(v.a)({},j),{},Object(L.a)({},t,""))):p(Object(v.a)(Object(v.a)({},j),{},Object(L.a)({},t,d.invalidEmail)))}if(t===Q){n.match(/^[+]?[(]?[0-9]{3}[)]?[-\s.]?[0-9]{3}[-\s.]?[0-9]{4,6}$/im)?p(Object(v.a)(Object(v.a)({},j),{},Object(L.a)({},t,""))):p(Object(v.a)(Object(v.a)({},j),{},Object(L.a)({},t,d.invalidPhone)))}t===X&&p(""===n?Object(v.a)(Object(v.a)({},j),{},Object(L.a)({},t,d.numberOfGroupIsRequired)):Object(v.a)(Object(v.a)({},j),{},Object(L.a)({},t,"")))},U=function(){return""!==j.name||""!==j.email||""!==j.phone||""!==j.group_number};return Object(b.jsxs)("form",{autoComplete:"off",className:o.form,onSubmit:function(e){U()||(e.preventDefault(),function(e){var t=e.id,a=e.roomId,n=e.weekNumber,o=e.dayNumber,c=e.timeNumber,r=e.time,s=e.reserved,i=e.setIsSentBook,l=e.isSentBook;w.put("/users/".concat(t,"/rooms/").concat(a,"/weeks/").concat(n,"/days/").concat(o,"/times/").concat(c,".json"),{time:r,reserved:s}).then((function(e){200===e.status&&i(!l)}))}({id:c.id,roomId:c.roomId,weekNumber:c.weekNumber,dayNumber:A.clickedDay,timeNumber:A.clickedTime,time:A.time,reserved:!0,setIsSentBook:c.setIsSentBook,isSentBook:c.isSentBook}),function(e){var t=e.name,a=e.phone,n=e.email,o=e.message,c=e.groupNumber,r=e.date,s=e.time,i=e.room,l=e.id;w.post("/users/".concat(l,"/reservations/.json"),{"N\xe9v":t,"Telefonsz\xe1m":a,Email:n,"Megjegyz\xe9s":o,"L\xe9tsz\xe1m:":c,"D\xe1tum":r,"\xd3ra":s,Szoba:i}).then((function(e){}))}({name:f,email:N,phone:z,message:T,groupNumber:i,date:A.date,time:A.time,room:A.roomId,id:c.id}),t())},children:[Object(b.jsx)(E.a,{id:"name",label:d.name,type:"text",variant:"outlined",className:o.input,helperText:null===j||void 0===j?void 0:j.name,required:!0,inputProps:{maxLength:255},error:Boolean(null===j||void 0===j?void 0:j.name),onBlur:function(e){return H(e,V,g)},onChange:function(e){return H(e,V,g)}},"name"),Object(b.jsx)(E.a,{id:"email",label:d.email,type:"email",variant:"outlined",className:o.input,autoComplete:"new-email",required:!0,error:""!==(null===j||void 0===j?void 0:j.email),helperText:null===j||void 0===j?void 0:j.email,onBlur:function(e){return H(e,$,I)},onChange:function(e){return H(e,$,g)}},"email"),Object(b.jsx)(E.a,{id:"phone",label:d.phone,type:"number",variant:"outlined",className:o.input,autoComplete:"new-phone",required:!0,error:""!==(null===j||void 0===j?void 0:j.phone),helperText:null===j||void 0===j?void 0:j.phone,onBlur:function(e){return H(e,Q,B)},onChange:function(e){return H(e,Q,g)}},"phone"),Object(b.jsxs)(R.a,{required:!0,variant:"outlined",className:o.formControl,error:""!==(null===j||void 0===j?void 0:j.group_number),children:[Object(b.jsx)(_.a,{id:"group-number",children:d.groupNumber},"group-number"),Object(b.jsx)(q.a,{labelId:"group-number",label:d.groupNumber,id:"group-number-select",value:i,onChange:function(e){l(e.target.value)},onBlur:function(e){return H(e,X,l)},children:function(){for(var e=[],t=1;t<a+1;t++)e.push(Object(b.jsx)(D.a,{value:t,children:t},t));return e}()},"group-number-select"),Object(b.jsxs)(F.a,{children:[null===j||void 0===j?void 0:j.group_number," "]})]},"form-control"),Object(b.jsx)(R.a,{fullWidth:!0,variant:"outlined",className:o.input,children:Object(b.jsx)(E.a,{id:"message",label:d.message,type:"text",variant:"outlined",className:"".concat(o.input," ").concat(o.message),autoComplete:"new-message",onChange:function(e){return G(e.target.value)},multiline:!0,rows:5},"message")}),Object(b.jsx)(W.a,{disabled:U(),type:"submit",variant:"contained",color:"primary",className:"".concat(o.button," ").concat(o.input),children:d.booking},"button")]})},ne=Object(i.a)((function(e){return{modal:{display:"flex",alignItems:"center",justifyContent:"center"},paper:{backgroundColor:e.palette.background.paper,border:"2px solid #000",boxShadow:e.shadows[5],padding:e.spacing(2,4,3)}}})),oe=function(e){var t=e.openModal,a=e.setOpenModal,n=e.roomCapacity,o=ne(),c=function(){a(!1)};return Object(b.jsx)(M.a,{"aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",className:o.modal,open:t,onClose:c,closeAfterTransition:!0,BackdropComponent:P.a,BackdropProps:{timeout:500},children:Object(b.jsx)(T.a,{in:t,children:Object(b.jsxs)("div",{className:o.paper,children:[Object(b.jsx)(l.a,{container:!0,justifyContent:"center",alignItems:"center",children:A.date}),Object(b.jsx)(ae,{handleClose:c,roomCapacity:n})]})})})},ce=Object(i.a)({tableCell:{border:"2px solid grey",padding:20},reserved:{cursor:"not-allowed",background:"red"},free:{cursor:"pointer",background:"#90EE90"},disabled:{cursor:"not-allowed",visibility:"hidden"}}),re=function(e){var t=e.response,a=e.index,n=e.setOpenModal,o=e.rowIndex,c=e.roomId,r=ce(),s=function(e,t){function a(e){var t=e;return t<10&&(t="0".concat(t)),t}var n=new Date,o="".concat(n.getFullYear(),"-").concat(a(n.getMonth()+1),"-").concat(a(n.getDate()));function c(e,t){var a=new Z.parse(e),n=new Z.parse(t);return U.ChronoUnit.DAYS.between(a,n)}return c(o,t)<0||0===c(o,t)&&parseInt(e)<=n.getHours()}(t.dayTimes[a].time,t.date);return Object(b.jsx)(I.a,{onClick:function(){t.dayTimes[a].reserved||s||(n(!0),A.clickedDay=o,A.clickedTime=a,A.time=t.dayTimes[a].time,A.date=t.date,A.roomId=c)},className:"".concat(r.tableCell," ").concat(t.dayTimes[a].reserved?r.reserved:r.free," ").concat(s?r.disabled:""),children:t.dayTimes[a].time},"table-body-cell-".concat(t.date))},se=Object(i.a)({table:{maxWidth:700}}),ie=function(e){var t=e.response,a=e.roomId,o=e.roomCapacity,c=Object(n.useState)(!1),r=Object(x.a)(c,2),s=r[0],i=r[1],u=se(),m=[],j=[d.monday,d.tuesday,d.wednesday,d.thursday,d.friday,d.saturday,d.sunday];var p=t.days.map((function(e){return t=e.date,a=e.day_name,n=e.times.map((function(e){return e})),{date:t,dayName:a,dayTimes:n};var t,a,n})),O=function(e){return Object(b.jsx)(z.a,{className:u.tableRow,children:p.map((function(t,n){return Object(b.jsx)(re,{response:t,index:e,setOpenModal:i,rowIndex:n,roomId:a},n)}))},e)};return function(){for(var e=0;e<6;e++)m.push(O(e))}(),Object(n.useEffect)((function(){}),[t]),Object(b.jsx)(C.a,{children:Object(b.jsxs)(y.a,{className:u.table,"aria-label":"simple table",children:[Object(b.jsx)(oe,{openModal:s,setOpenModal:i,response:t,roomCapacity:o}),Object(b.jsx)(S.a,{children:Object(b.jsx)(z.a,{children:j.map((function(e,a){return Object(b.jsxs)(I.a,{children:[Object(b.jsx)(l.a,{children:e},"table-head-cell".concat(a)),Object(b.jsx)(B.a,{variant:"caption",children:t.days[a].date},"table-head-date".concat(a))]},"table-head-".concat(a))}))})}),Object(b.jsx)(N.a,{children:m.map((function(e){return e}))})]})})},le=a(104),de=a.n(le),be=a(103),ue=a.n(be),me=Object(n.createContext)(),je=Object(i.a)({weekWrapper:{width:"auto",padding:20},ArrowIcon:{cursor:"pointer",padding:10,fontSize:50}}),pe=function(e){var t=e.roomNameFromBookingPage,a=Object(n.useState)([]),o=Object(x.a)(a,2),c=o[0],r=o[1],s=Object(n.useState)(!0),i=Object(x.a)(s,2),u=i[0],m=i[1],p=Object(n.useState)(null),O=Object(x.a)(p,2),h=O[0],f=O[1],g=Object(n.useState)(!1),k=Object(x.a)(g,2),y=k[0],N=k[1],I=H()()-1,C=Object(n.useState)(null),S=Object(x.a)(C,2),z=S[0],M=S[1],P=je(),T=Object(j.g)().room_name,L="-MoUTkg1gdkGpPFivBxy",E=Object(n.useState)(),F=Object(x.a)(E,2),W=F[0],_=F[1];Object(n.useEffect)((function(){M(I),f(function(e){var t;switch(e){case K:t="-Mp1W6hGMvV79dDM-K8U";break;case Y:t="-Mp1WBHtwPG0NRkGTONd";break;case J:t="-Mp1WF1YL7dOnZUkm24h";break;default:t=""}return t}(ee(T)?T:t))}),[t]),Object(n.useEffect)((function(){ee(z)&&function(e){var t=e.id,a=e.setResponse,n=e.setLoading,o=e.roomId,c=e.weekNumber,r=[];w.get("/users/".concat(t,"/rooms/").concat(o,"/weeks/").concat(c,".json")).then((function(e){for(var t in e.data)r.unshift(Object(v.a)(Object(v.a)({},e.data[t]),{},{id:t}));a(e.data),n(!1)}))}({id:L,setResponse:r,setLoading:m,roomId:h,weekNumber:z})}),[z,y,h]),Object(n.useEffect)((function(){!function(e){var t=e.id,a=e.setState,n=e.roomId;w.get("/users/".concat(t,"/rooms/").concat(n,"/capacity.json")).then((function(e){a(e.data)}))}({id:L,setState:_,roomId:h})}),[u]);var D;return u?Object(b.jsx)("h1",{children:"Loading..."}):Object(b.jsxs)(l.a,{container:!0,justifyContent:"center",alignItems:"center",direction:"column",children:[Object(b.jsx)(B.a,{variant:"h4",children:(D=T,d[D])}),Object(b.jsxs)(l.a,{container:!0,alignItems:"center",className:P.weekWrapper,children:[Object(b.jsx)(ue.a,{id:"arrowLeft",className:P.ArrowIcon,onClick:function(){var e=z-1;e>=I&&M(e)}}),Object(b.jsxs)(B.a,{variant:"h4",children:[c.week,". ",d.week]}),Object(b.jsx)(de.a,{id:"arrowRight",className:P.ArrowIcon,onClick:function(){var e=z+1;e<=51&&M(e)}})]}),Object(b.jsx)(me.Provider,{value:{id:L,roomId:h,weekNumber:z,isSentBook:y,setIsSentBook:N},children:Object(b.jsx)(l.a,{children:Object(b.jsx)(ie,{response:c,roomId:h,weekNumber:z,roomCapacity:W})})})]})},Oe=a(23),he=a(248),fe=a(237),ge=a(78),xe=a.n(ge),ve=a(79),ke=a.n(ve),we=a(105),ye=a.n(we),Ne=a(106),Ie=[{label:"Fogs\xe1gban",imgPath:"https://havefun.travel/wp-content/uploads/2019/01/live-escape-game-1155620_1920.jpg"},{label:"szoba-2",imgPath:"https://cdn.cloudflare.steamstatic.com/steam/apps/977570/ss_56ef1b9a8b3b95f4b18ff8321a56a4fb80e61ccc.1920x1080.jpg?t=1644848164"},{label:"szoba-3",imgPath:"https://www.scavengerescape.com/storage/room/1_2.jpg?cra=2017-06-21_13:15:30"}],Ce=Object(Ne.autoPlay)(ye.a),Se=Object(i.a)((function(e){return{root:{maxWidth:500,flexGrow:1},header:{display:"flex",alignItems:"center",height:50,paddingLeft:e.spacing(4),backgroundColor:e.palette.background.default},img:{height:255,display:"block",maxWidth:500,overflow:"hidden",width:"100%"}}})),ze=function(){var e=Se(),t=Object(Oe.a)(),a=o.a.useState(0),c=Object(x.a)(a,2),r=c[0],s=c[1],i=Object(n.useState)(K),d=Object(x.a)(i,2),u=d[0],m=d[1];return Object(n.useEffect)((function(){switch(r){case 0:m(K);break;case 1:m(Y);break;case 2:m(J)}}),[r]),Object(b.jsx)(l.a,{container:!0,justifyContent:"center",alignItems:"center",children:Object(b.jsxs)("div",{className:e.root,children:[Object(b.jsx)(fe.a,{square:!0,elevation:0,className:e.header,children:Object(b.jsx)(B.a,{children:Ie[r].label})}),Object(b.jsx)(Ce,{axis:"rtl"===t.direction?"x-reverse":"x",index:r,children:Ie.map((function(t,a){return Object(b.jsx)("div",{children:Math.abs(r-a)<=2?Object(b.jsx)("img",{className:e.img,src:t.imgPath,alt:t.label}):null},t.label)}))}),Object(b.jsx)(he.a,{steps:3,position:"static",variant:"text",activeStep:r,nextButton:Object(b.jsxs)(W.a,{size:"small",onClick:function(){s((function(e){return e+1}))},disabled:2===r,children:["Next","rtl"===t.direction?Object(b.jsx)(xe.a,{}):Object(b.jsx)(ke.a,{})]}),backButton:Object(b.jsxs)(W.a,{size:"small",onClick:function(){s((function(e){return e-1}))},disabled:0===r,children:["rtl"===t.direction?Object(b.jsx)(ke.a,{}):Object(b.jsx)(xe.a,{}),"Back"]})}),Object(b.jsx)(pe,{roomNameFromBookingPage:u})]})})};var Be=function(){return window.location.host,Object(b.jsxs)(o.a.Fragment,{children:[Object(b.jsx)(m,{}),Object(b.jsx)(g,{}),Object(b.jsxs)(j.c,{children:[Object(b.jsx)(j.a,{path:"/escape-room",element:Object(b.jsx)(O,{})}),Object(b.jsx)(j.a,{path:"/escape-room/szobak",element:Object(b.jsx)(f,{})}),Object(b.jsx)(j.a,{path:"/escape-room/foglalas",element:Object(b.jsx)(ze,{})}),Object(b.jsx)(j.a,{path:"/escape-room/szobak/:room_name",element:Object(b.jsx)(pe,{})}),Object(b.jsx)(j.a,{element:h})]})]})};r.a.render(Object(b.jsx)(s.a,{children:Object(b.jsx)(Be,{})}),document.getElementById("root"))}},[[185,1,2]]]);
//# sourceMappingURL=main.100ea969.chunk.js.map