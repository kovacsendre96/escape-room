(this["webpackJsonpescape-room"]=this["webpackJsonpescape-room"]||[]).push([[0],{124:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(11),c=a.n(r),s=a(21),i=a(168),l=a(171),d={monday:"H\xe9tf\u0151",tuesday:"Kedd",wednesday:"Szerda",thursday:"Cs\xfctr\xf6t\xf6k",friday:"P\xe9ntek",saturday:"Szombat",sunday:"Vas\xe1rnap",week:"H\xe9t",mainPage:"F\u0151oldal",rooms:"Szob\xe1k",booking:"Foglal\xe1s",contact:"Kapcsolat",fogsagban:"Fogs\xe1gban","szoba-2":"Szoba 2","szoba-3":"Szoba 3",name:"Teljes n\xe9v",email:"Email c\xedm",phone:"Telefonsz\xe1m",message:"Megjegyz\xe9s",groupNumber:"L\xe9tsz\xe1m",nameIsRequired:"N\xe9v kit\xf6lt\xe9se k\xf6telez\u0151",invalidEmail:"Hib\xe1s e-mail",invalidPhone:"Hib\xe1s telefonsz\xe1m",numberOfGroupIsRequired:"L\xe9tsz\xe1m megad\xe1sa k\xf6telez\u0151"},u=a(3),b=Object(i.a)({navWrapper:{background:"black",color:"white",height:60,padding:0,margin:0},linkItem:{cursor:"pointer",color:"white",textDecoration:"none"}}),m=function(){var e=b();return Object(u.jsxs)(l.a,{className:e.navWrapper,container:!0,justifyContent:"space-around",alignItems:"center",children:[Object(u.jsx)(l.a,{item:!0,children:Object(u.jsx)(s.b,{className:e.linkItem,to:"/",children:d.mainPage})}),Object(u.jsx)(l.a,{item:!0,children:Object(u.jsx)(s.b,{className:e.linkItem,to:"/szobak",children:d.rooms})}),Object(u.jsxs)(l.a,{item:!0,children:[" ",Object(u.jsxs)(s.b,{className:e.linkItem,to:"/foglalas",children:[" ",d.booking," "]})," "]}),Object(u.jsxs)(l.a,{item:!0,children:[" ",Object(u.jsxs)(s.b,{className:e.linkItem,to:"/kapcsolat",children:[" ",d.contact," "]})," "]})]})},j=a(18),O=a(12),p=a(13),h=a(82),f=a.n(h).a.create({baseURL:"https://booking-database-aa483-default-rtdb.europe-west1.firebasedatabase.app/"}),g=a(179),x=a(182),v=a(176),k=a(178),y=a(180),w=a(177),N=a(181),I=a(183),C=a(175),S=a(130),z=a(173),B=a(129),M=a(174),T=a(135),L=a(184),E=a(128),P=a(132),D=Object,R="name",W="email",q="phone",F="group_number",_=Object(i.a)((function(e){return{form:{display:"flex",flexDirection:"column",width:500},input:{margin:5},formControl:{margin:e.spacing(1),minWidth:120},selectLabel:{paddingLeft:10},message:{"& .MuiInputBase-formControl":{height:150,display:"flex",alignItems:"flex-start"}},button:{"& > *":{margin:e.spacing(1)}}}})),A=function(e){var t=e.handleClose,a=e.roomCapacity,o=_(),r=Object(n.useContext)(ee),c=Object(n.useState)(""),s=Object(O.a)(c,2),i=s[0],l=s[1],b=Object(n.useState)({name:"",email:"",phone:"",group_number:""}),m=Object(O.a)(b,2),h=m[0],g=m[1],x=Object(n.useState)(null),v=Object(O.a)(x,2),k=v[0],y=v[1],w=Object(n.useState)(null),N=Object(O.a)(w,2),I=N[0],C=N[1],S=Object(n.useState)(null),A=Object(O.a)(S,2),G=A[0],H=A[1],U=Object(n.useState)(null),Z=Object(O.a)(U,2),K=Z[0],J=Z[1],V=function(e,t,a){var n=e.target.value;if(a(n),g(t===R&&""===n?Object(p.a)(Object(p.a)({},h),{},Object(j.a)({},t,d.nameIsRequired)):Object(p.a)(Object(p.a)({},h),{},Object(j.a)({},t,""))),t===W){n.match(/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/)?g(Object(p.a)(Object(p.a)({},h),{},Object(j.a)({},t,""))):g(Object(p.a)(Object(p.a)({},h),{},Object(j.a)({},t,d.invalidEmail)))}if(t===q){n.match(/^[\+]?[(]?[0-9]{3}[)]?[-\s\.]?[0-9]{3}[-\s\.]?[0-9]{4,6}$/im)?g(Object(p.a)(Object(p.a)({},h),{},Object(j.a)({},t,""))):g(Object(p.a)(Object(p.a)({},h),{},Object(j.a)({},t,d.invalidPhone)))}t===F&&g(""===n?Object(p.a)(Object(p.a)({},h),{},Object(j.a)({},t,d.numberOfGroupIsRequired)):Object(p.a)(Object(p.a)({},h),{},Object(j.a)({},t,"")))},Y=function(){return""!==h.name||""!==h.email||""!==h.phone||""!==h.group_number};return Object(u.jsxs)("form",{autoComplete:"off",className:o.form,onSubmit:function(e){Y()||(e.preventDefault(),function(e){var t=e.id,a=e.roomId,n=e.weekNumber,o=e.dayNumber,r=e.timeNumber,c=e.time,s=e.reserved,i=e.setIsSentBook,l=e.isSentBook;f.put("/users/".concat(t,"/rooms/").concat(a,"/weeks/").concat(n,"/days/").concat(o,"/times/").concat(r,".json"),{time:c,reserved:s}).then((function(e){200===e.status&&i(!l)}))}({id:r.id,roomId:r.roomId,weekNumber:r.weekNumber,dayNumber:D.clickedDay,timeNumber:D.clickedTime,time:D.time,reserved:!0,setIsSentBook:r.setIsSentBook,isSentBook:r.isSentBook}),function(e){var t=e.name,a=e.phone,n=e.email,o=e.message,r=e.groupNumber,c=e.date,s=e.time,i=e.room,l=e.id;f.post("/users/".concat(l,"/reservations/.json"),{"N\xe9v":t,"Telefonsz\xe1m":a,Email:n,"Megjegyz\xe9s":o,"L\xe9tsz\xe1m:":r,"D\xe1tum":c,"\xd3ra":s,Szoba:i}).then((function(e){}))}({name:k,email:I,phone:G,message:K,groupNumber:i,date:D.date,time:D.time,room:D.roomId,id:r.id}),t())},children:[Object(u.jsx)(z.a,{id:"name",label:d.name,type:"text",variant:"outlined",className:o.input,helperText:null===h||void 0===h?void 0:h.name,required:!0,inputProps:{maxLength:255},error:Boolean(null===h||void 0===h?void 0:h.name),onBlur:function(e){return V(e,R,y)},onChange:function(e){return V(e,R,y)}},"name"),Object(u.jsx)(z.a,{id:"email",label:d.email,type:"email",variant:"outlined",className:o.input,autoComplete:"new-email",required:!0,error:""!==(null===h||void 0===h?void 0:h.email),helperText:null===h||void 0===h?void 0:h.email,onBlur:function(e){return V(e,W,C)},onChange:function(e){return V(e,W,y)}},"email"),Object(u.jsx)(z.a,{id:"phone",label:d.phone,type:"number",variant:"outlined",className:o.input,autoComplete:"new-phone",required:!0,error:""!==(null===h||void 0===h?void 0:h.phone),helperText:null===h||void 0===h?void 0:h.phone,onBlur:function(e){return V(e,q,H)},onChange:function(e){return V(e,q,y)}},"phone"),Object(u.jsxs)(E.a,{required:!0,variant:"outlined",className:o.formControl,error:""!==(null===h||void 0===h?void 0:h.group_number),children:[Object(u.jsx)(T.a,{id:"group-number",children:d.groupNumber},"group-number"),Object(u.jsx)(P.a,{labelId:"group-number",label:d.groupNumber,id:"group-number-select",value:i,onChange:function(e){l(e.target.value)},onBlur:function(e){return V(e,F,l)},children:function(){for(var e=[],t=1;t<a+1;t++)e.push(Object(u.jsx)(L.a,{value:t,children:t},t));return e}()},"group-number-select"),Object(u.jsxs)(B.a,{children:[null===h||void 0===h?void 0:h.group_number," "]})]},"form-control"),Object(u.jsx)(E.a,{fullWidth:!0,variant:"outlined",className:o.input,children:Object(u.jsx)(z.a,{id:"message",label:d.message,type:"text",variant:"outlined",className:"".concat(o.input," ").concat(o.message),autoComplete:"new-message",onChange:function(e){return J(e.target.value)},multiline:!0,rows:5},"message")}),Object(u.jsx)(M.a,{disabled:Y(),type:"submit",variant:"contained",color:"primary",className:"".concat(o.button," ").concat(o.input),children:d.booking},"button")]})},G=Object(i.a)((function(e){return{modal:{display:"flex",alignItems:"center",justifyContent:"center"},paper:{backgroundColor:e.palette.background.paper,border:"2px solid #000",boxShadow:e.shadows[5],padding:e.spacing(2,4,3)}}})),H=function(e){var t=e.openModal,a=e.setOpenModal,n=e.roomCapacity,o=G(),r=function(){a(!1)};return Object(u.jsx)(I.a,{"aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",className:o.modal,open:t,onClose:r,closeAfterTransition:!0,BackdropComponent:C.a,BackdropProps:{timeout:500},children:Object(u.jsx)(S.a,{in:t,children:Object(u.jsxs)("div",{className:o.paper,children:[Object(u.jsx)(l.a,{container:!0,justifyContent:"center",alignItems:"center",children:D.date}),Object(u.jsx)(A,{handleClose:r,roomCapacity:n})]})})})},U=Object(i.a)({tableCell:{border:"2px solid white",padding:20},reserved:{cursor:"not-allowed",background:"red"},free:{cursor:"pointer",background:"#90EE90"}}),Z=function(e){var t=e.response,a=e.index,n=e.setOpenModal,o=e.rowIndex,r=e.roomId,c=U();return Object(u.jsx)(v.a,{onClick:function(){t.dayTimes[a].reserved||(n(!0),D.clickedDay=o,D.clickedTime=a,D.time=t.dayTimes[a].time,D.date=t.date,D.roomId=r)},className:"".concat(c.tableCell," ").concat(t.dayTimes[a].reserved?c.reserved:c.free),children:t.dayTimes[a].time},"table-body-cell-".concat(t.date))},K=Object(i.a)({table:{maxWidth:700}}),J=function(e){var t=e.response,a=e.roomId,o=e.roomCapacity,r=Object(n.useState)(!1),c=Object(O.a)(r,2),s=c[0],i=c[1],b=K(),m=[],j=[d.monday,d.tuesday,d.wednesday,d.thursday,d.friday,d.saturday,d.sunday];var p=t.days.map((function(e){return t=e.date,a=e.day_name,n=e.times.map((function(e){return e})),{date:t,dayName:a,dayTimes:n};var t,a,n})),h=function(e){return Object(u.jsx)(w.a,{className:b.tableRow,children:p.map((function(t,n){return Object(u.jsx)(Z,{response:t,index:e,setOpenModal:i,rowIndex:n,roomId:a},n)}))},e)};return function(){for(var e=0;e<6;e++)m.push(h(e))}(),Object(n.useEffect)((function(){}),[t]),Object(u.jsx)(k.a,{children:Object(u.jsxs)(g.a,{className:b.table,"aria-label":"simple table",children:[Object(u.jsx)(H,{openModal:s,setOpenModal:i,response:t,roomCapacity:o}),Object(u.jsx)(y.a,{children:Object(u.jsx)(w.a,{children:j.map((function(e,a){return Object(u.jsxs)(v.a,{children:[Object(u.jsx)(l.a,{children:e},"table-head-cell".concat(a)),Object(u.jsx)(N.a,{variant:"caption",children:t.days[a].date},"table-head-date".concat(a))]},"table-head-".concat(a))}))})}),Object(u.jsx)(x.a,{children:m.map((function(e){return e}))})]})})},V=a(84),Y=a.n(V),$=a(83),Q=a.n($),X=a(7),ee=Object(n.createContext)(),te=Object(i.a)({weekWrapper:{width:"auto",padding:20},ArrowIcon:{cursor:"pointer",padding:10,fontSize:50}}),ae=function(){var e=Object(n.useState)([]),t=Object(O.a)(e,2),a=t[0],o=t[1],r=Object(n.useState)(!0),c=Object(O.a)(r,2),s=c[0],i=c[1],b=Object(n.useState)(null),m=Object(O.a)(b,2),h=m[0],g=m[1],x=Object(n.useState)(!1),v=Object(O.a)(x,2),k=v[0],y=v[1],w=function(){var e=new Date,t=new Date(e.getFullYear(),0,1),a=(e.valueOf()-t.valueOf())/864e5;return Math.ceil((a+t.getDay()+1)/7)-2}(),I=Object(n.useState)(null),C=Object(O.a)(I,2),S=C[0],z=C[1],B=te(),M=Object(X.g)().room_name,T="-MoUTkg1gdkGpPFivBxy",L=Object(n.useState)(),E=Object(O.a)(L,2),P=E[0],D=E[1];Object(n.useEffect)((function(){z(w),g(function(e){var t;switch(e){case"fogsagban":t="-Mp1W6hGMvV79dDM-K8U";break;case"szoba-2":t="-Mp1WBHtwPG0NRkGTONd";break;case"szoba-3":t="-Mp1WF1YL7dOnZUkm24h"}return t}(M))}),[]),Object(n.useEffect)((function(){null!==S&&function(e){var t=e.id,a=e.setResponse,n=e.setLoading,o=e.roomId,r=e.weekNumber,c=[];f.get("/users/".concat(t,"/rooms/").concat(o,"/weeks/").concat(r,".json")).then((function(e){for(var t in e.data)c.unshift(Object(p.a)(Object(p.a)({},e.data[t]),{},{id:t}));a(e.data),n(!1)}))}(Object(j.a)({id:T,setResponse:o,setLoading:i,roomId:h,weekNumber:S},"weekNumber",S))}),[S,k]),Object(n.useEffect)((function(){!function(e){var t=e.id,a=e.setState,n=e.roomId;f.get("/users/".concat(t,"/rooms/").concat(n,"/capacity.json")).then((function(e){a(e.data)}))}({id:T,setState:D,roomId:h})}),[s]);var R;return s?Object(u.jsx)("h1",{children:"Loading..."}):Object(u.jsxs)(l.a,{container:!0,justifyContent:"center",alignItems:"center",direction:"column",children:[Object(u.jsx)(N.a,{variant:"h4",children:(R=M,d[R])}),Object(u.jsxs)(l.a,{container:!0,alignItems:"center",className:B.weekWrapper,children:[Object(u.jsx)(Q.a,{id:"arrowLeft",className:B.ArrowIcon,onClick:function(){var e=S-1;e>=w&&z(e)}}),Object(u.jsxs)(N.a,{variant:"h4",children:[a.week,". ",d.week]}),Object(u.jsx)(Y.a,{id:"arrowRight",className:B.ArrowIcon,onClick:function(){var e=S+1;e<=51&&z(e)}})]}),Object(u.jsx)(ee.Provider,{value:{id:T,roomId:h,weekNumber:S,isSentBook:k,setIsSentBook:y},children:Object(u.jsx)(l.a,{children:Object(u.jsx)(J,{response:a,roomId:h,weekNumber:S,roomCapacity:P})})})]})},ne=function(){return Object(u.jsx)("h1",{children:"MainPage"})},oe=function(){return Object(u.jsx)("h1",{children:"NotFound"})},re=function(){return Object(u.jsxs)(l.a,{container:!0,direction:"column",children:[Object(u.jsx)(l.a,{children:Object(u.jsx)(s.b,{to:"/szobak/fogsagban",children:"SZOBA 1"})}),Object(u.jsx)(l.a,{children:Object(u.jsx)(s.b,{to:"/szobak/szoba-2",children:"SZOBA 2"})}),Object(u.jsx)(l.a,{children:Object(u.jsx)(s.b,{to:"/szobak/szoba-3",children:"SZOBA 3"})})]})};var ce=function(){return Object(u.jsxs)(o.a.Fragment,{children:[Object(u.jsx)(m,{}),Object(u.jsxs)(X.c,{children:[Object(u.jsx)(X.a,{path:"/",element:Object(u.jsx)(ne,{})}),Object(u.jsx)(X.a,{path:"/escape-room/szobak",element:Object(u.jsx)(re,{})}),Object(u.jsx)(X.a,{path:"/escape-room/szobak/:room_name",element:Object(u.jsx)(ae,{})}),Object(u.jsx)(X.a,{element:oe})]})]})};c.a.render(Object(u.jsx)(s.a,{children:Object(u.jsx)(ce,{})}),document.getElementById("root"))}},[[124,1,2]]]);
//# sourceMappingURL=main.707305f2.chunk.js.map