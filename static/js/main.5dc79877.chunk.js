(this["webpackJsonpescape-room"]=this["webpackJsonpescape-room"]||[]).push([[0],{124:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(11),c=a.n(o),s=a(21),i=a(168),l=a(171),d={monday:"H\xe9tf\u0151",tuesday:"Kedd",wednesday:"Szerda",thursday:"Cs\xfctr\xf6t\xf6k",friday:"P\xe9ntek",saturday:"Szombat",sunday:"Vas\xe1rnap",week:"H\xe9t",mainPage:"F\u0151oldal",rooms:"Szob\xe1k",booking:"Foglal\xe1s",contact:"Kapcsolat",fogsagban:"Fogs\xe1gban","szoba-2":"Szoba 2","szoba-3":"Szoba 3",name:"Teljes n\xe9v",email:"Email c\xedm",phone:"Telefonsz\xe1m",message:"Megjegyz\xe9s",groupNumber:"L\xe9tsz\xe1m",nameIsRequired:"N\xe9v kit\xf6lt\xe9se k\xf6telez\u0151",invalidEmail:"Hib\xe1s e-mail",invalidPhone:"Hib\xe1s telefonsz\xe1m",numberOfGroupIsRequired:"L\xe9tsz\xe1m megad\xe1sa k\xf6telez\u0151"},b=a(3),u=Object(i.a)({navWrapper:{background:"black",color:"white",height:60,padding:0,margin:0},linkItem:{cursor:"pointer",color:"white",textDecoration:"none"}}),m=function(){var e=u();return Object(b.jsxs)(l.a,{className:e.navWrapper,container:!0,justifyContent:"space-around",alignItems:"center",children:[Object(b.jsx)(l.a,{item:!0,children:Object(b.jsx)(s.b,{className:e.linkItem,to:"/",children:d.mainPage})}),Object(b.jsx)(l.a,{item:!0,children:Object(b.jsx)(s.b,{className:e.linkItem,to:"/szobak",children:d.rooms})}),Object(b.jsxs)(l.a,{item:!0,children:[" ",Object(b.jsxs)(s.b,{className:e.linkItem,to:"/foglalas",children:[" ",d.booking," "]})," "]}),Object(b.jsxs)(l.a,{item:!0,children:[" ",Object(b.jsxs)(s.b,{className:e.linkItem,to:"/kapcsolat",children:[" ",d.contact," "]})," "]})]})},j=a(18),O=a(12),p=a(13),h=a(82),f=a.n(h).a.create({baseURL:"https://booking-database-aa483-default-rtdb.europe-west1.firebasedatabase.app/"}),g=a(179),x=a(182),v=a(176),k=a(178),w=a(180),y=a(177),N=a(181),I=a(183),S=a(175),z=a(130),C=a(173),B=a(129),M=a(174),T=a(135),L=a(184),P=a(128),R=a(132),D=Object,E="name",W="email",q="phone",F="group_number",_=Object(i.a)((function(e){return{form:{display:"flex",flexDirection:"column",width:500},input:{margin:5},formControl:{margin:e.spacing(1),minWidth:120},selectLabel:{paddingLeft:10},message:{"& .MuiInputBase-formControl":{height:150,display:"flex",alignItems:"flex-start"}},button:{"& > *":{margin:e.spacing(1)}}}})),A=function(e){var t=e.handleClose,a=_(),r=Object(n.useContext)(ee),o=Object(n.useState)(""),c=Object(O.a)(o,2),s=c[0],i=c[1],l=Object(n.useState)({name:"",email:"",phone:"",group_number:""}),u=Object(O.a)(l,2),m=u[0],h=u[1],g=Object(n.useState)(null),x=Object(O.a)(g,2),v=x[0],k=x[1],w=Object(n.useState)(null),y=Object(O.a)(w,2),N=y[0],I=y[1],S=Object(n.useState)(null),z=Object(O.a)(S,2),A=z[0],G=z[1],H=Object(n.useState)(null),U=Object(O.a)(H,2),Z=U[0],K=U[1],J=function(e,t,a){var n=e.target.value;if(a(n),h(t===E&&""===n?Object(p.a)(Object(p.a)({},m),{},Object(j.a)({},t,d.nameIsRequired)):Object(p.a)(Object(p.a)({},m),{},Object(j.a)({},t,""))),t===W){n.match(/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/)?h(Object(p.a)(Object(p.a)({},m),{},Object(j.a)({},t,""))):h(Object(p.a)(Object(p.a)({},m),{},Object(j.a)({},t,d.invalidEmail)))}if(t===q){n.match(/^[\+]?[(]?[0-9]{3}[)]?[-\s\.]?[0-9]{3}[-\s\.]?[0-9]{4,6}$/im)?h(Object(p.a)(Object(p.a)({},m),{},Object(j.a)({},t,""))):h(Object(p.a)(Object(p.a)({},m),{},Object(j.a)({},t,d.invalidPhone)))}t===F&&h(""===n?Object(p.a)(Object(p.a)({},m),{},Object(j.a)({},t,d.numberOfGroupIsRequired)):Object(p.a)(Object(p.a)({},m),{},Object(j.a)({},t,"")))},V=function(){return""!==m.name||""!==m.email||""!==m.phone||""!==m.group_number};return Object(b.jsxs)("form",{autoComplete:"off",className:a.form,onSubmit:function(e){V()||(e.preventDefault(),function(e){var t=e.id,a=e.roomId,n=e.weekNumber,r=e.dayNumber,o=e.timeNumber,c=e.time,s=e.reserved,i=e.setIsSentBook,l=e.isSentBook;f.put("/users/".concat(t,"/rooms/").concat(a,"/weeks/").concat(n,"/days/").concat(r,"/times/").concat(o,".json"),{time:c,reserved:s}).then((function(e){200===e.status&&i(!l)}))}({id:r.id,roomId:r.roomId,weekNumber:r.weekNumber,dayNumber:D.clickedDay,timeNumber:D.clickedTime,time:D.time,reserved:!0,setIsSentBook:r.setIsSentBook,isSentBook:r.isSentBook}),function(e){var t=e.name,a=e.phone,n=e.email,r=e.message,o=e.groupNumber,c=e.date,s=e.time,i=e.room,l=e.id;f.post("/users/".concat(l,"/reservations/.json"),{"N\xe9v":t,"Telefonsz\xe1m":a,Email:n,"Megjegyz\xe9s":r,"L\xe9tsz\xe1m:":o,"D\xe1tum":c,"\xd3ra":s,Szoba:i}).then((function(e){}))}({name:v,email:N,phone:A,message:Z,groupNumber:s,date:D.date,time:D.time,room:D.roomId,id:r.id}),t())},children:[Object(b.jsx)(C.a,{id:"name",label:d.name,type:"text",variant:"outlined",className:a.input,helperText:null===m||void 0===m?void 0:m.name,required:!0,inputProps:{maxLength:255},error:Boolean(null===m||void 0===m?void 0:m.name),onBlur:function(e){return J(e,E,k)}},"name"),Object(b.jsx)(C.a,{id:"email",label:d.email,type:"email",variant:"outlined",className:a.input,autoComplete:"new-email",required:!0,error:""!==(null===m||void 0===m?void 0:m.email),helperText:null===m||void 0===m?void 0:m.email,onBlur:function(e){return J(e,W,I)}},"email"),Object(b.jsx)(C.a,{id:"phone",label:d.phone,type:"number",variant:"outlined",className:a.input,autoComplete:"new-phone",required:!0,error:""!==(null===m||void 0===m?void 0:m.phone),helperText:null===m||void 0===m?void 0:m.phone,onBlur:function(e){return J(e,q,G)}},"phone"),Object(b.jsxs)(P.a,{required:!0,variant:"outlined",className:a.formControl,error:""!==(null===m||void 0===m?void 0:m.group_number),children:[Object(b.jsx)(T.a,{id:"group-number",children:d.groupNumber},"group-number"),Object(b.jsx)(R.a,{labelId:"group-number",label:d.groupNumber,id:"group-number-select",value:s,onChange:function(e){i(e.target.value)},onBlur:function(e){return J(e,F,i)},children:function(){for(var e=[],t=1;t<6;t++)e.push(Object(b.jsx)(L.a,{value:t,children:t},t));return e}()},"group-number-select"),Object(b.jsxs)(B.a,{children:[null===m||void 0===m?void 0:m.group_number," "]})]},"form-control"),Object(b.jsx)(P.a,{fullWidth:!0,variant:"outlined",className:a.input,children:Object(b.jsx)(C.a,{id:"message",label:d.message,type:"text",variant:"outlined",className:"".concat(a.input," ").concat(a.message),autoComplete:"new-message",onChange:function(e){return K(e.target.value)},multiline:!0,rows:5},"message")}),Object(b.jsx)(M.a,{disabled:V(),type:"submit",variant:"contained",color:"primary",className:"".concat(a.button," ").concat(a.input),children:d.booking},"button")]})},G=Object(i.a)((function(e){return{modal:{display:"flex",alignItems:"center",justifyContent:"center"},paper:{backgroundColor:e.palette.background.paper,border:"2px solid #000",boxShadow:e.shadows[5],padding:e.spacing(2,4,3)}}})),H=function(e){var t=e.openModal,a=e.setOpenModal,n=(e.response,G()),r=function(){a(!1)};return Object(b.jsx)(I.a,{"aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",className:n.modal,open:t,onClose:r,closeAfterTransition:!0,BackdropComponent:S.a,BackdropProps:{timeout:500},children:Object(b.jsx)(z.a,{in:t,children:Object(b.jsxs)("div",{className:n.paper,children:[Object(b.jsx)(l.a,{container:!0,justifyContent:"center",alignItems:"center",children:D.date}),Object(b.jsx)(A,{handleClose:r})]})})})},U=Object(i.a)({tableCell:{border:"2px solid white",padding:20},reserved:{cursor:"not-allowed",background:"red"},free:{cursor:"pointer",background:"#90EE90"}}),Z=function(e){var t=e.response,a=e.index,n=e.setOpenModal,r=e.rowIndex,o=e.roomId,c=U();return Object(b.jsx)(v.a,{onClick:function(){t.dayTimes[a].reserved||(n(!0),D.clickedDay=r,D.clickedTime=a,D.time=t.dayTimes[a].time,D.date=t.date,D.roomId=o)},className:"".concat(c.tableCell," ").concat(t.dayTimes[a].reserved?c.reserved:c.free),children:t.dayTimes[a].time},"table-body-cell-".concat(t.date))},K=Object(i.a)({table:{maxWidth:700}}),J=function(e){var t=e.response,a=e.roomId,r=Object(n.useState)(!1),o=Object(O.a)(r,2),c=o[0],s=o[1],i=K(),u=[],m=[d.monday,d.tuesday,d.wednesday,d.thursday,d.friday,d.saturday,d.sunday];var j=t.days.map((function(e){return t=e.date,a=e.day_name,n=e.times.map((function(e){return e})),{date:t,dayName:a,dayTimes:n};var t,a,n})),p=function(e){return Object(b.jsx)(y.a,{className:i.tableRow,children:j.map((function(t,n){return Object(b.jsx)(Z,{response:t,index:e,setOpenModal:s,rowIndex:n,roomId:a},n)}))},e)};return function(){for(var e=0;e<6;e++)u.push(p(e))}(),Object(n.useEffect)((function(){}),[t]),Object(b.jsx)(k.a,{children:Object(b.jsxs)(g.a,{className:i.table,"aria-label":"simple table",children:[Object(b.jsx)(H,{openModal:c,setOpenModal:s,response:t}),Object(b.jsx)(w.a,{children:Object(b.jsx)(y.a,{children:m.map((function(e,a){return Object(b.jsxs)(v.a,{children:[Object(b.jsx)(l.a,{children:e},"table-head-cell".concat(a)),Object(b.jsx)(N.a,{variant:"caption",children:t.days[a].date},"table-head-date".concat(a))]},"table-head-".concat(a))}))})}),Object(b.jsx)(x.a,{children:u.map((function(e){return e}))})]})})},V=a(84),Y=a.n(V),$=a(83),Q=a.n($),X=a(7),ee=Object(n.createContext)(),te=Object(i.a)({weekWrapper:{width:"auto",padding:20},ArrowIcon:{cursor:"pointer",padding:10,fontSize:50}}),ae=function(){var e=Object(n.useState)([]),t=Object(O.a)(e,2),a=t[0],r=t[1],o=Object(n.useState)(!0),c=Object(O.a)(o,2),s=c[0],i=c[1],u=Object(n.useState)(null),m=Object(O.a)(u,2),h=m[0],g=m[1],x=Object(n.useState)(!1),v=Object(O.a)(x,2),k=v[0],w=v[1],y=function(){var e=new Date,t=new Date(e.getFullYear(),0,1),a=(e.valueOf()-t.valueOf())/864e5;return Math.ceil((a+t.getDay()+1)/7)-2}(),I=Object(n.useState)(null),S=Object(O.a)(I,2),z=S[0],C=S[1],B=te(),M=Object(X.g)().room_name,T="-MoUTkg1gdkGpPFivBxy";Object(n.useEffect)((function(){C(y),g(function(e){var t;switch(e){case"fogsagban":t="-Mp1W6hGMvV79dDM-K8U";break;case"szoba-2":t="-Mp1WBHtwPG0NRkGTONd";break;case"szoba-3":t="-Mp1WF1YL7dOnZUkm24h"}return t}(M))}),[]),Object(n.useEffect)((function(){null!==z&&function(e){var t=e.id,a=e.setResponse,n=e.setLoading,r=e.roomId,o=e.weekNumber,c=[];f.get("/users/".concat(t,"/rooms/").concat(r,"/weeks/").concat(o,".json")).then((function(e){for(var t in e.data)c.unshift(Object(p.a)(Object(p.a)({},e.data[t]),{},{id:t}));a(e.data),n(!1)}))}(Object(j.a)({id:T,setResponse:r,setLoading:i,roomId:h,weekNumber:z},"weekNumber",z))}),[z,k]);var L,P=function(e){if("arrowLeft"===e.target.id){var t=z-1;t>=y&&C(t)}if("arrowRight"===e.target.id){var a=z+1;a<=51&&C(a)}};return s?Object(b.jsx)("h1",{children:"Loading..."}):Object(b.jsxs)(l.a,{container:!0,justifyContent:"center",alignItems:"center",direction:"column",children:[Object(b.jsx)(N.a,{variant:"h4",children:(L=M,d[L])}),Object(b.jsxs)(l.a,{container:!0,alignItems:"center",className:B.weekWrapper,children:[Object(b.jsx)(Q.a,{id:"arrowLeft",className:B.ArrowIcon,onClick:P}),Object(b.jsxs)(N.a,{variant:"h4",children:[a.week,". ",d.week]}),Object(b.jsx)(Y.a,{id:"arrowRight",className:B.ArrowIcon,onClick:P})]}),Object(b.jsx)(ee.Provider,{value:{id:T,roomId:h,weekNumber:z,isSentBook:k,setIsSentBook:w},children:Object(b.jsx)(l.a,{children:Object(b.jsx)(J,{response:a,roomId:h,weekNumber:z})})})]})},ne=function(){return Object(b.jsx)("h1",{children:"MainPage"})},re=function(){return Object(b.jsx)("h1",{children:"NotFound"})},oe=function(){return Object(b.jsxs)(l.a,{container:!0,direction:"column",children:[Object(b.jsx)(l.a,{children:Object(b.jsx)(s.b,{to:"/szobak/fogsagban",children:"SZOBA 1"})}),Object(b.jsx)(l.a,{children:Object(b.jsx)(s.b,{to:"/szobak/szoba-2",children:"SZOBA 2"})}),Object(b.jsx)(l.a,{children:Object(b.jsx)(s.b,{to:"/szobak/szoba-3",children:"SZOBA 3"})})]})};var ce=function(){return Object(b.jsxs)(r.a.Fragment,{children:[Object(b.jsx)(m,{}),Object(b.jsxs)(X.c,{children:[Object(b.jsx)(X.a,{path:"/",element:Object(b.jsx)(ne,{})}),Object(b.jsx)(X.a,{path:"/szobak",element:Object(b.jsx)(oe,{})}),Object(b.jsx)(X.a,{path:"/szobak/:room_name",element:Object(b.jsx)(ae,{})}),Object(b.jsx)(X.a,{element:re})]})]})};c.a.render(Object(b.jsx)(s.a,{children:Object(b.jsx)(ce,{})}),document.getElementById("root"))}},[[124,1,2]]]);
//# sourceMappingURL=main.5dc79877.chunk.js.map